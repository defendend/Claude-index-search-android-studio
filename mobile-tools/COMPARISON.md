# Сравнение CLI vs MCP (claude-in-mobile)

Реальные замеры на Android устройстве (Pixel 9a).

## Полная таблица всех методов

| # | CLI | MCP | Описание | CLI мс | MCP мс | CLI ток | MCP ток | Экономия |
|---|-----|-----|----------|--------|--------|---------|---------|----------|
| 1 | devices | list_devices | Список устройств | 12 | 191 | 8 | 96 | **12x** |
| 2 | — | set_device | Выбор устройства | — | 124 | — | 103 | MCP only |
| 3 | — | set_target | Выбор платформы | — | 1 | — | 95 | MCP only |
| 4 | — | get_target | Текущая платформа | — | 1 | — | 90 | MCP only |
| 5 | screenshot | screenshot | Скриншот | 917 | 1163 | 12 | 100 | **8x** |
| 6 | ui-dump | get_ui | UI иерархия | 2653 | 2444 | 8 | 95 | **12x** |
| 7 | annotate | analyze_screen | Анализ экрана* | 3563 | 2779 | 11 | 97 | **9x** |
| 8 | tap | tap | Тап | 151 | 165 | 9 | 99 | **11x** |
| 9 | long-press | long_press | Долгое нажатие | 573 | 649 | 12 | 105 | **9x** |
| 10 | swipe | swipe | Свайп | 413 | 405 | 11 | 106 | **10x** |
| 11 | input | input_text | Ввод текста | 121 | 135 | 9 | 100 | **11x** |
| 12 | key | press_key | Нажатие клавиши | **97** | 132 | 8 | 99 | **12x** |
| 13 | tap-text | find_and_tap | Найти и тапнуть | **2676** | 3021 | 10 | 102 | **10x** |
| 14 | — | tap_by_text | Тап по тексту | — | 0 | — | 98 | MCP only |
| 15 | find | find_element | Поиск элемента | 2597 | 2538 | 9 | 101 | **11x** |
| 16 | launch | launch_app | Запуск приложения | **140** | 238 | 12 | 104 | **9x** |
| 17 | stop | stop_app | Остановка | **114** | 187 | 12 | 103 | **9x** |
| 18 | install | install_app | Установка | 28 | 107 | 12 | 103 | **9x** |
| 19 | current-activity | get_current_activity | Текущее активити | 70 | 79 | 10 | 98 | **10x** |
| 20 | shell | shell | Shell команда | **40** | 56 | 10 | 101 | **10x** |
| 21 | wait | wait | Ожидание | 116 | 102 | 6 | 91 | **15x** |
| 22 | open-url | open_url | Открыть URL | 141 | 175 | 12 | 101 | **8x** |
| 23 | logs | get_logs | Логи | 64 | 55 | 10 | 98 | **10x** |
| 24 | clear-logs | clear_logs | Очистка логов | 127 | 149 | 8 | 96 | **12x** |
| 25 | system-info | get_system_info | Системная инфо | 108 | 173 | 9 | 97 | **11x** |
| 26 | uninstall | — | Удаление приложения | 73 | — | 11 | — | CLI only |
| 27 | apps | — | Список приложений | 77 | — | 7 | — | CLI only |
| 28 | reboot | — | Перезагрузка | 100 | — | 7 | — | CLI only |
| 29 | screen | — | Вкл/выкл экрана | 137 | — | 6 | — | CLI only |
| 30 | screen-size | — | Разрешение экрана | 120 | — | 9 | — | CLI only |
|   | **ИТОГО** |  |  | **15028** | **15069** | **248** | **2478** | **10x** |

*annotate делает image processing (рисует рамки на скриншоте), analyze_screen только парсит UI XML

## Итоговые результаты (после оптимизации)

| Метрика | CLI | MCP | Результат |
|---------|-----|-----|-----------|
| Мобильных методов | 26 | 25 | CLI +1 |
| CLI-only методов | 5 | 0 | CLI +5 |
| Время (мс) | 15028 | 15069 | **CLI на 41мс быстрее** |
| Токены | 248 | 2478 | **CLI в 10x эффективнее** |

## Выполненные оптимизации

| Метод | До | После | Улучшение | Что сделано |
|-------|-----|-------|-----------|-------------|
| launch | 388мс | 140мс | **-248мс** | resolve-activity + am start |
| tap-text | 3383мс | 2676мс | **-707мс** | get_ui_xml в одну команду |
| key | 151мс | 97мс | **-54мс** | Убран лишний overhead |
| stop | 188мс | 114мс | **-74мс** | Оптимизация ADB вызова |
| shell | 63мс | 40мс | **-23мс** | Прямой exec |

**Общее улучшение: 1246мс (с 16274мс до 15028мс)**

## Где CLI теперь быстрее MCP

| CLI метод | CLI мс | MCP мс | Разница |
|-----------|--------|--------|---------|
| launch | 140 | 238 | **-98мс** ✅ |
| tap-text | 2676 | 3021 | **-345мс** ✅ |
| key | 97 | 132 | **-35мс** ✅ |
| stop | 114 | 187 | **-73мс** ✅ |
| shell | 40 | 56 | **-16мс** ✅ |

## Где MCP всё ещё быстрее

| CLI метод | CLI мс | MCP мс | Разница | Причина |
|-----------|--------|--------|---------|---------|
| annotate | 3563 | 2779 | +784мс | Разная функциональность* |
| ui-dump | 2653 | 2444 | +209мс | uiautomator overhead |
| find | 2597 | 2538 | +59мс | Незначительно |

*annotate рисует рамки на изображении, analyze_screen просто парсит XML

## Вывод

- **Время**: CLI теперь чуть быстрее (15028мс vs 15069мс)
- **Токены**: CLI в 10x эффективнее (248 vs 2478)
- **Для задач навигации**: CLI — лучший выбор
